<!doctype html>
<html lang="en">
<head>
    <link rel="stylesheet" href="main.css">
    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Sign Up</title>
    <style>
        /* Your CSS styles */
    </style>
</head>
<body>
<nav class="purple">
    <div class="nav-wrapper" style="padding-left: 20px; padding-right: 20px;">
        <a href="#" class="brand-logo">Sign Up</a>
    </div>
</nav>
<div class="container">
    <div class="row">
        <form id="signupForm" class="col s12">
            <div class="row">
                <div class="input-field col s12">
                    <input id="email" type="email" class="validate" required>
                    <label for="email">Email</label>
                </div>
            </div>
            <div class="row">
                <div class="input-field col s12">
                    <input id="password" type="password" class="validate" required>
                    <label for="password">Password</label>
                </div>
            </div>
            <button id="signupBtn" class="btn waves-effect waves-light" type="submit">Sign Up</button>
        </form>
    </div>
</div>

<script type="module" src="auth.js"></script>
<script type="module" src="data.js"></script>
<script type="module">
    import { signIn, signUp, logout, auth, setAuthListeners } from './auth.js';

    let signupForm = document.querySelector('#signupForm');

    function setLoggedInUI() {
        M.toast({html: 'Logged In!'})
        // Add UI changes for logged-in state if needed
    }

    function setLoggedOutUI() {
        M.toast({html: 'Logged Out!'})
        // Add UI changes for logged-out state if needed
    }

    // Attach listeners
    signupForm.addEventListener('submit', async (e) => {
        e.preventDefault();
        const email = document.querySelector('#email').value;
        const password = document.querySelector('#password').value;
        try {
            await signUp(email, password);
        } catch (error) {
            console.error(error);
        }
    });
    setAuthListeners(setLoggedInUI, setLoggedOutUI);

</script>
</body>
</html>
